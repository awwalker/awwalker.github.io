<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    
    <title>Citi Bike Visualization</title>
    <link rel="stylesheet" type="text/css" href="../../../dist/semantic.css" />
    <link rel="stylesheet" type="text/css" href="./citi-bike-post.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.13.0/css/semantic.min.css">
    
    <script src="../../../dist/semantic.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
    
  </head>
  
  <body>
    <div class="index-body">
      <header class="page-header">
        <a href="../../index.html">
        <button class="ui mini basic animated button">
          <div class="visible content">Home</div>
          <div class="hidden content">
            <i class="left arrow icon"></i>
          </div>
        </button>
        </a>
      </header>
      <header class="main-header no-cover">
        <h1 class="post-title">Visualizing How New Yorkers Utilize Citi Bikes</h1>
        <section class="post-meta">
          <time class='post-date' datetime="2015-10-27">27 October 2015</time>
        </section>
      </header>

      <section class = "post-content">
      	<p><a href = "https://www.citibikenyc.com/about"> Citi Bike</a> is New York City's bike sharing system instituted by Citi Bank and operated by <a href = "http://www.motivateco.com/"> Motivate</a>. The bike sharing system is designed to provide New Yorkers an additional method of transportation around the city. As a whole the system is fairly simple to understand: there is a fleet of bicycles that can be rented from and then returned to any of the hundreds of docking stationsin the city. As of May 2013 Citi had installed 332 docking stations and stocked them with 6,000 bikes. Plans were made for expansion but I could not find any publicly released data on the current number of stations or bikes. </p>
      	<p>This project started as a way to begin learning to work with the Python <a href = "http://pandas.pydata.org/" >Pandas</a> library. Over the past summer after working with the Javascript <a href = "">D3</a> library I was hooked on data visualizations and looking for another project that would allow me to create another nice looking visual. Luckily for me Citi has made their data public <a href = "https://www.citibikenyc.com/system-data">here</a>. In my rush to produce I decided to only work with the data from July 2013...obviously this was a beginner mistake because there is data from as recently as September of this year now. Perhaps at some point in the future I'll revise this project to represent the data from each of the available months.</p>
      	<p>Because Citi is nice enough to clean their data working with it as a CSV with Pandas was incredibly easy. In fact one of the hardest parts of this project was trying to figure out a clean and still relevant way to present the data. After looking at different visalizations online I came across this <a href= "http://bost.ocks.org/mike/uberdata/"> Uber data> visualization</a> by Mike Bostock. Mike made it look so easy to represent this kind of back and forth travel relationship using the chord diagram so I figured I should give it a shot. I seriously considered using a heat matrix as well but figured a chord diagram would look cleaner with the amount of data I was going to try and represent.</p>
      	<p>Speaking of the volume of data...while the csv file itself was not that large ~100MB and ~840,000 rows in Excel it is important to remember that this represents a flow of traffic between 322 stations, not the less than 30 or so neighboorhoods used by Mike. The whole idea behind the visualization was to attempt to see the traffic flow between docking stations, yet because there are so many stations it was nearly impossible to include all of them. In fact my first chord diagram looked like a completely colored in circle, just a mess of lines criss crossing the diagram making any sort of inference impossible.</p>
      	<p>I decided that I needed to pick which stations to observe and which to ignore. Using Pandas it was easy to group stations by how they interacted with each other and then tally up the amount of traffic there was going between them (in both directions). Once I had the data in this format it was easy to see that many stations either had no traffic or very little traffic. Now that my data frame was formatted to look at each start station and the available end stations I created a count column that measured the amount of stops between start station and each end station.</p>
      	<p>D3 is able to read in data in several forms, I decided to format my data as a two separate json files: One that listed the relavant stations in alphabetical order and one that saved the amount of traffic between each station as a list of lists. In order to filter out the less used I iterated through my list of stations looking at first a start station and then all the possible end stations. In my data frame I was able to then retrieve the count between the two stations. Then if the number of trips between the two stations was more than or equal to 10 I would add that value to a list of values representing traffic. If it was less than ten I would just add a 0. Then to further reduce the number os stations I would then iterate through the list of traffic values and if the traffic values list for a given station has more 0s in it than true trafic values I discard that station. If the station does have more true values than 0s AND it has more than 300 total trips taken from it I finally accept that station as a 'good' station and add it to one last list of final stations and take the list of traffic values for this station and add it to a list of lists representing all traffic.</p>
      </section>
